<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Post Code Generator</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
 <style>
  /* Global Styles */
  
  *,
*::before,
*::after {
  box-sizing: border-box;
}

  body {
    font-family: Arial, sans-serif;
    background: #111;
    color: #eee;
    padding: 5px;
    margin: 0;
    display: flex;
    justify-content: center;
  }

  .container {
    width: 100%;
    max-width: 900px;
    padding: 5px 15px;
    box-sizing: border-box;
  }

  input[type="text"],
  textarea,
  button {
    width: 100%;
    padding: 12px;
    margin: 10px 0;
    border-radius: 5px;
    border: none;
    background: #222;
    color: #fff;
    font-size: 16px;
  }

  button {
    background: #28a745;
    color: white;
    cursor: pointer;
  }

  /* Preformatted Code Output */
  pre {
    background: #222;
    padding: 12px;
    white-space: pre-wrap;
    border-radius: 5px;
    margin-top: 20px;
    font-size: 14px;
    overflow-x: auto;
    overflow-y: auto;
    max-height: 300px;
  }

  pre::-webkit-scrollbar {
    width: 10px;
  }

  pre::-webkit-scrollbar-thumb {
    background-color: #444;
    border-radius: 10px;
  }

  pre::-webkit-scrollbar-track {
    background: #222;
  }

  /* Checkbox inside label */
  label input[type="checkbox"] {
    margin-right: 8px;
  }

  /* Episode Section */
  #episodeContainer {
    display: block;
  }

  /* Tab Controls */
  .tab-buttons {
    display: flex;
    justify-content: center;
    margin-bottom: 20px;
  }

  .tab-buttons button {
    background-color: #444;
    color: #fff;
    padding: 10px;
    margin-right: 10px;
    border: none;
    cursor: pointer;
    border-radius: 5px;
  }

  .tab-buttons button.active {
    background-color: #007bff;
  }

  .tab-content {
    display: none;
  }

  .tab-content.active {
    display: block;
  }

  /* Responsive Enhancements */
  @media (min-width: 768px) {
    body {
      padding: 40px;
    }

    input[type="text"],
    textarea,
    button,
    pre {
      font-size: 18px;
    }

    button {
      padding: 14px;
    }

    h2 {
      font-size: 28px;
    }

    label {
      font-size: 16px;
    }
  }
</style>

</head>

<body>
  <div class="container">
    
    <h2><i class="bi bi-code-square"></i> Post Code Generator</h2>

<!-- âš™ï¸ Settings Button -->
<button id="tinySettingsBtn" style="
  position: fixed;
  bottom: 20px;
  right: 20px;
  color: white;
  border: none;
  background:transparent;
  border-radius: 50%;
  width: 50px;
  height: 50px;
  font-size: 24px;
  z-index: 9999;
  cursor: pointer;
"><i class="bi bi-gear"></i></button>

<!-- ðŸ”§ Modal -->
<div id="tinySettingsModal" style="
  display: none;
  position: fixed;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  background: rgba(0, 0, 0, 0.7);
  z-index: 9998;
  align-items: center;
  justify-content: center;
">
  <div style="
    background: #222;
    color: white;
    padding: 20px;
    border-radius: 12px;
    width: 90%;
    max-width: 400px;
  ">
    <h3>TinyURL Settings</h3>
    <label style="display: block; margin: 10px 0;">
      <input type="checkbox" id="tinyEnable"> Enable TinyURL
    </label>
    <input type="text" id="tinyApiKey" placeholder="Enter TinyURL API Token" style="width: 100%; padding: 8px;">
    <button id="tinyCloseBtn" style="margin-top: 15px; padding: 8px 12px;">Close</button>
  </div>
</div>



    <!-- Tab Buttons -->
    <div class="tab-buttons">
      <button id="movieTab" class="active" onclick="switchTab('movie')">Movie</button>
      <button id="seriesTab" onclick="switchTab('series')">Series</button>
    </div>

    <!-- Movie Tab Content -->
    <div id="movieTabContent" class="tab-content active">
      <label>Post ID:</label>
      <input type="text" id="moviePostID" placeholder="Enter Post ID" />

      <label>Image Link:</label>
      <input type="text" id="movieImageLink" placeholder="https://example.com/image.jpg" />

      <label>Iframe Video Link:</label>
      <input type="text" id="movieIframeLink" placeholder="https://example.com/embed/xyz123" />

      <label><input type="checkbox" id="movieShowSynopsis" checked> Synopsis:</label>
      <textarea id="movieSynopsis" rows="3" placeholder="Enter synopsis here..."></textarea>

      <label><input type="checkbox" id="movieShowCasts" checked> Casts:</label>
      <input type="text" id="movieCasts" placeholder="Actor 1, Actor 2" />

      <label><input type="checkbox" id="movieShowDirector" checked> Director:</label>
      <input type="text" id="movieDirector" placeholder="Director Name" />

      <label><input type="checkbox" id="movieShowRelease" checked> Release Date:</label>
      <input type="text" id="movieRelease" placeholder="2025" />

      <label><input type="checkbox" id="movieShowCountry" checked> Country:</label>
      <input type="text" id="movieCountry" placeholder="USA, Korea, etc." />

      <label><input type="checkbox" id="movieShowDownload" checked> Download Link:</label>
      <input type="text" id="movieDownloadLink" placeholder="https://example.com/download" />

      <button onclick="generateMovieCode()">Generate Movie Code</button>
    </div>

    <!-- Series Tab Content -->
    <div id="seriesTabContent" class="tab-content">
      <label>Post ID:</label>
      <input type="text" id="seriesPostID" placeholder="Enter Post ID" />

      <label>Series Image Link:</label>
      <input type="text" id="seriesImageLink" placeholder="https://example.com/image.jpg" />

      <label><input type="checkbox" id="seriesShowSynopsis" checked> Synopsis:</label>
      <textarea id="seriesSynopsis" rows="3" placeholder="Enter synopsis here..."></textarea>

      <label><input type="checkbox" id="seriesShowCasts" checked> Casts:</label>
      <input type="text" id="seriesCasts" placeholder="Actor 1, Actor 2" />

      <label><input type="checkbox" id="seriesShowDirector" checked> Director:</label>
      <input type="text" id="seriesDirector" placeholder="Director Name" />

      <label><input type="checkbox" id="seriesShowRelease" checked> Release Date:</label>
      <input type="text" id="seriesRelease" placeholder="2025" />

      <label><input type="checkbox" id="seriesShowCountry" checked> Country:</label>
      <input type="text" id="seriesCountry" placeholder="China, etc." />

     

      <div id="episodeContainer">
        <label>Episodes:</label>
        <div id="seriesEpisodes">
          <!-- Default Episode 1 -->
          <div>
            <input type="text" class="episodeLink" placeholder="Episode 1 URL" />
          </div>
        </div>
        <button type="button" onclick="addSeriesEpisode()">Add Episode</button>
      </div>

      <button onclick="generateSeriesCode()">Generate Series Code</button>
    </div>

    <h3><i class="bi bi-wrench-adjustable"></i> Generated Code:</h3>
    <pre id="output"></pre>
    <button onclick="copyCode()" style="background:#007bff; margin-top: 10px;">Copy Code</button>
  </div>

  <script>
let episodeCount = 1;

function switchTab(tab) {
  document.getElementById("movieTab").classList.remove("active");
  document.getElementById("seriesTab").classList.remove("active");
  document.getElementById("movieTabContent").classList.remove("active");
  document.getElementById("seriesTabContent").classList.remove("active");

  if (tab === 'movie') {
    document.getElementById("movieTab").classList.add("active");
    document.getElementById("movieTabContent").classList.add("active");
  } else {
    document.getElementById("seriesTab").classList.add("active");
    document.getElementById("seriesTabContent").classList.add("active");
  }
}


async function generateMovieCode() {
  const postID = document.getElementById("moviePostID").value.trim();
  const image = document.getElementById("movieImageLink").value.trim();
 const iframeOriginal = document.getElementById("movieIframeLink").value.trim();
const iframe = await shortenURL(iframeOriginal);
  const synopsis = document.getElementById("movieSynopsis").value.trim();
  const casts = document.getElementById("movieCasts").value.trim();
  const director = document.getElementById("movieDirector").value.trim();
  const release = document.getElementById("movieRelease").value.trim();
  const country = document.getElementById("movieCountry").value.trim();
  const download = document.getElementById("movieDownloadLink").value.trim();

  const showSynopsis = document.getElementById("movieShowSynopsis").checked;
  const showCasts = document.getElementById("movieShowCasts").checked;
  const showDirector = document.getElementById("movieShowDirector").checked;
  const showRelease = document.getElementById("movieShowRelease").checked;
  const showCountry = document.getElementById("movieShowCountry").checked;
  const showDownload = document.getElementById("movieShowDownload").checked;

  let infoHTML = "";

if (showSynopsis && synopsis) infoHTML += `<p id="synopsis">${synopsis}</p>\n`;

let tableRows = "";

if (showCasts && casts) tableRows += `<tr><td>Casts:</td><td>${casts}</td></tr>\n`;
if (showDirector && director) tableRows += `<tr><td>Director:</td><td>${director}</td></tr>\n`;
if (showRelease && release) tableRows += `<tr><td>Release:</td><td>${release}</td></tr>\n`;
if (showCountry && country) tableRows += `<tr><td>Country:</td><td>${country}</td></tr>\n`;

if (tableRows) {
  infoHTML += `<table class="blueTable">\n<tbody>\n${tableRows}</tbody>\n</table>\n`;
}

if (showDownload && download) {
  infoHTML += `<a class="watchbtn" href="javascript:void(0);" id="fullscreenButton">Watch Now</a>\n`;
  infoHTML += `<a href="${download}">Download Here</a>\n`;
}


  const code = `
<html>
<iframe id="fullscreen-Button" class="lazyload" data-src="${iframe}" src="${iframe}" frameborder="0" allowfullscreen></iframe>
<img alt="poster" src="${image}"/>
${infoHTML}

<span id="post-id" data-post-id="${postID}" style="display:none;"></span>
</html>
`.trim();


  document.getElementById("output").textContent = code;
}



function addSeriesEpisode() {
  const container = document.getElementById("seriesEpisodes");
  const episodeDiv = document.createElement("div");

  const epInput = document.createElement("input");
  epInput.type = "text";
  epInput.className = "episodeLink";
  epInput.placeholder = "Episode URL";

  const removeBtn = document.createElement("button");
  removeBtn.textContent = "Remove";
  removeBtn.onclick = () => {
    container.removeChild(episodeDiv);
    renumberEpisodes();
  };

  episodeDiv.appendChild(epInput);
  episodeDiv.appendChild(removeBtn);
  container.appendChild(episodeDiv);

  renumberEpisodes();
}

function renumberEpisodes() {
  const episodes = document.querySelectorAll("#seriesEpisodes > div");
  episodes.forEach((div, i) => {
    const input = div.querySelector("input.episodeLink");
    const num = i + 1;
    input.setAttribute("data-ep-number", num);
    input.setAttribute("placeholder", "Episode " + num + " URL");
  });
}

async function generateSeriesCode() {
  const postID = document.getElementById("seriesPostID").value.trim();
  const image = document.getElementById("seriesImageLink").value.trim(); 
  const synopsis = document.getElementById("seriesSynopsis").value.trim();
  const casts = document.getElementById("seriesCasts").value.trim();
  const director = document.getElementById("seriesDirector").value.trim();
  const release = document.getElementById("seriesRelease").value.trim();
  const country = document.getElementById("seriesCountry").value.trim();

  const showSynopsis = document.getElementById("seriesShowSynopsis").checked;
  const showCasts = document.getElementById("seriesShowCasts").checked;
  const showDirector = document.getElementById("seriesShowDirector").checked;
  const showRelease = document.getElementById("seriesShowRelease").checked;
  const showCountry = document.getElementById("seriesShowCountry").checked;

  let infoHTML = "";

  if (showSynopsis && synopsis) infoHTML += `<p id="synopsis">${synopsis}</p>\n`;

  let tableRows = "";
  if (showCasts && casts) tableRows += `<tr><td>Casts:</td><td>${casts}</td></tr>\n`;
  if (showDirector && director) tableRows += `<tr><td>Director:</td><td>${director}</td></tr>\n`;
  if (showRelease && release) tableRows += `<tr><td>Release:</td><td>${release}</td></tr>\n`;
  if (showCountry && country) tableRows += `<tr><td>Country:</td><td>${country}</td></tr>\n`;

  if (tableRows) {
    infoHTML += `<table class="blueTable">\n<tbody>\n${tableRows}</tbody>\n</table>\n`;
  }

  // Extract episode links and create anchor tags for each
  const episodeLinks = document.querySelectorAll("#seriesEpisodes input.episodeLink");
  let episodesHTML = "";
  episodeLinks.forEach((input, index) => {
    const episodeURL = input.value.trim();
    if (episodeURL) {
      const episodeNumber = index + 1;
      episodesHTML += `<a href="" class="epi" data-src="${episodeURL}">${episodeNumber}</a><br>\n`;
    }
  });

  // Add episodes to the generated code
  let code = `
<html>
<img alt="poster" src="${image}"/>
<iframe id="series" class="lazyload" data-src="/" src="/" title="Video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
${infoHTML}
<div class="episodes">
  ${episodesHTML}
</div>
<span id="post-id" data-post-id="${postID}" style="display:none;"></span>
</html>
  `.trim();

  document.getElementById("output").textContent = code;
}



function copyCode() {
  const code = document.getElementById("output").textContent;
  navigator.clipboard.writeText(code).then(() => {
    alert("Code copied to clipboard!");
  });
}
</script>

<script>
  async function shortenURL(longUrl) {
  const token = document.getElementById("tinyApiKey").value.trim();

  if (!token) {
    console.warn("TinyURL API token not provided, skipping URL shortening.");
    return longUrl;
  }

  try {
    const response = await fetch("https://api.tinyurl.com/create", {
      method: "POST",
      headers: {
        "Authorization": `Bearer ${token}`,
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        url: longUrl,
        domain: "tinyurl.com"
      })
    });

    const data = await response.json();
    if (data?.data?.tiny_url) {
      return data.data.tiny_url;
    } else {
      console.warn("TinyURL API error:", data);
      return longUrl;
    }
  } catch (err) {
    console.error("Error shortening URL:", err);
    return longUrl;
  }
}

</script>

<script>
  const settingsBtn = document.getElementById("tinySettingsBtn");
  const modal = document.getElementById("tinySettingsModal");
  const closeBtn = document.getElementById("tinyCloseBtn");
  const enableCheckbox = document.getElementById("tinyEnable");
  const apiKeyInput = document.getElementById("tinyApiKey");

  // Load saved settings
  document.addEventListener("DOMContentLoaded", () => {
    enableCheckbox.checked = localStorage.getItem("tinyEnabled") === "true";
    apiKeyInput.value = localStorage.getItem("tinyApiKey") || "";
  });

  // Toggle modal
  settingsBtn.onclick = () => modal.style.display = "flex";
  closeBtn.onclick = () => modal.style.display = "none";
  window.onclick = e => { if (e.target === modal) modal.style.display = "none"; };

  // Save settings on change
  enableCheckbox.onchange = () => {
    localStorage.setItem("tinyEnabled", enableCheckbox.checked);
  };

  apiKeyInput.oninput = () => {
    localStorage.setItem("tinyApiKey", apiKeyInput.value.trim());
  };

  // Shorten URL function
  async function shortenURL(longUrl) {
    const enabled = localStorage.getItem("tinyEnabled") === "true";
    const token = localStorage.getItem("tinyApiKey");

    if (!enabled || !token) return longUrl;

    try {
      const response = await fetch("https://api.tinyurl.com/create", {
        method: "POST",
        headers: {
          "Authorization": `Bearer ${token}`,
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          url: longUrl,
          domain: "tinyurl.com"
        })
      });

      const data = await response.json();
      return data?.data?.tiny_url || longUrl;
    } catch (err) {
      console.error("TinyURL error:", err);
      return longUrl;
    }
  }
</script>

</body>
</html>

